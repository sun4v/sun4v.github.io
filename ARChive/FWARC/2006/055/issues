Name:		Domain Services 
Submitter:	eric.sharakan@sun.com
Owner:		Hitendra Zhangada
Intern:		Narayan Venkat

Inception issues 02/13/2006
===========================

Narayan's issues:
----------------
1.2.1 - can you also put LDC in parentheses same place where it
is being spelt out for the first time.

Status: CLOSED

1.2.1, 2nd para - you are using the acronym 'DS' for the first time
can you expand this further in the first para of this section.

Status: CLOSED

2.3 - the word "..following.." is slightly misleading in the
first sentence.

Status: CLOSED

2.3.{1,2,3} minor nit, Can you make it more clear that the value
here is msg_type. I presume the structure here defines the content
of the payload .. The size of the payload will then correspond
to the size of this structure .. - correct ?

Status: CLOSED

2.4 It is implicit in the explanation here why you dont send back
a major version in the ACK or what the minor version means. The minor
version in the ACK means that you support the corresponding major
version and all the minor version <= the version in the ACK. Right ?

Status: CLOSED

2.5.4 would it make sense to add a line or two to state when
a DS_REG_NACK will be sent.

Status: CLOSED

2.5.5 4th para, I dont see anywhere in your structures the status
field you are referring to here. There is no msg format defined
for the error response.

Status: CLOSED

3.{1,2,3}.1 There is no explanation of what the seqno in
these requests are for.

Status: CLOSED

The seqno needs to be in both the request and the response.
So we can match the request to a response. It might be 
more like a streamID. This is a opaque value and will be
generated by the upper level service. We will need to define
how we generate this number. 

Status: CLOSED

3.2.1 what is the 'ms_delay' value for.

Revise description on how it is used.
Status: CLOSED


Sunit's issues:
--------------
[1] Section 2.5.1.3 Register Failed

Are the values of 'svc_handle' and 'major_vers' valid for all cases for
which NACK is generated? Even for DS_REG_NACK & DS_REG_DUP?

Revise doc to revise that fields are not valid for DS_REG_DUP?
Status: CLOSED


Please explain status DS_OK - 'NACK with Status=Success' sounds
confusing. I think DS_OK is really returned when the major version do
not match and 'major_vers' contains supported major version. If that
right, it needs to be added to the document.

Shoiuld no have a DS_OK with a NACK messages.
Status: CLOSED


[2] Sections 2.5.5 & 256

'ds_handle' is not defined in any of the structures in previous
sections. Is 'ds_handle' same as 'svc_handle' ?

They are the same. Change all references to svc_handle.
Status: CLOSED


Steve's issues:
--------------
A simple flow chart of how a domain services provider/consumer negotiates 
capabilities with respect to the versioning would be much easier to 
understand than a textual step-by-step description. Of course, it's up to 
the project team to decide if they want to implement that.

same versioning mechanism as sun4v
Status: CLOSED


Appendix A should be some sort of registry, not just an appendix to a 
document in the materials directory (similar to the hypervisor API 
registry, or the vendor FCode registry).

Create a registry on FWARC for each service

Status: OPEN


Will OBP be expected to support DS? If so, can we present the structures 
in block/packet format instead of C-style so there are no endianness issues.

A table might be better since we are sending LDC packets, we should
use a block structure as supposed to a c-style. Rewrite doc in 
table format. C is not contrained to put data in blocks. 
Add a bit layout and specify endianness.

Status: CLOSED

Inception issues:
----------------

sunit> 3.{1,2,3}.2 - Make SUCCESS as 0.

Status: CLOSED


3.3.1
reason string - should be null terminated

Status: CLOSED

--------------------------------------------------------------

Commitment issues 02/27/2006
============================

dmk> mark resolved issues as CLOSED

Status: CLOSED

dmk> remove older version (0.93 and only keep 0.96)
     also remove delta document

Status: CLOSED

narayan> sec 3.3.3 success needs to be 0

Status: CLOSED

dmk> in each section refer to string len in each section
     section 3.5.3 does not specify length as MAX_STR_LEN

Earlier section states this - sec 2.1
Status: CLOSED

dmk> 3.4.2 req_num should be first field
      be consistent with earlier domain services messages
yanmin> change seqno to reqno

Status: CLOSED

dmk> 3.4.3 CPU_OK and CPU_ERROR are responses and should they be 
      error messages

They are responses to the state of the CPU and not error messages.

Status: CLOSED

dmk> 3.4.3.1 CPUID should be 8 bytes -- need not be only 4 bytes

Status: CLOSED

dmk> pg 20, 3.4.4 Rename description to VCPU ID

Status: CLOSED

dmk> pg 20, 3.4.4 - more description needed on string_off

Status: CLOSED

dmk> 3.4.4.1 - previous protocols return operation status in field 
named 'status'. Here we are using 'result'. Make it consistent.

Status: CLOSED

--------------------------------------------------------------

Commitment-2 issues 03/06/2006
==============================

DMK> editorial: "NULL terminated" should be "NUL Terminated"
    throughout the document. (It's the ASCII NUL character
    that terminates a c-string.)

Status: CLOSED

DMK>In 2.5.2, the definition of svc_id should include
    "NUL terminated ASCII string" (as it does in the
    rest of the document, where strings are used.)

Status: CLOSED
