From sacadmin Tue Dec 23 09:02:50 2008
Received: from sac.sfbay.sun.com (localhost [127.0.0.1])
	by sac.sfbay.sun.com (8.13.8+Sun/8.13.8) with ESMTP id mBNH2o5f006358;
	Tue, 23 Dec 2008 09:02:50 -0800 (PST)
Received: (from ehring@localhost)
	by sac.sfbay.sun.com (8.13.8+Sun/8.13.8/Submit) id mBNH2o09006354;
	Tue, 23 Dec 2008 09:02:50 -0800 (PST)
Date: Tue, 23 Dec 2008 09:02:50 -0800 (PST)
From: Stephen Ehring <ehring@sac.sfbay.sun.com>
Message-Id: <200812231702.mBNH2o09006354@sac.sfbay.sun.com>
To: FWARC-record@sac.sfbay.sun.com
Subject: FW Progress State Domain Service [FWARC/2008/788 FastTrack timeout 01/09/2009]
Status: RO
Content-Length: 563


Template Version: @(#)sac_nextcase %I% %G% SMI
This information is Copyright 2008 Sun Microsystems
1. Introduction
    1.1. Project/Component Working Name:
	 FW Progress State Domain Service
    1.2. Name of Document Author/Supplier:
	 Author:  Yu Kong
    1.3  Date of This Document:
	23 December, 2008
4. Technical Description
    See the case directory for more detail

6. Resources and Schedule
    6.4. Steering Committee requested information
   	6.4.1. Consolidation C-team Name:
		unknown
    6.5. ARC review type: FastTrack
    6.6. ARC Exposure: open


From sacadmin Tue Dec 23 09:09:06 2008
Received: from newsunmail1brm.central.sun.com (newsunmail1brm.Central.Sun.COM [129.147.62.245])
	by sac.sfbay.sun.com (8.13.8+Sun/8.13.8) with ESMTP id mBNH96Uo006432
	for <fwarc@sac.sfbay.sun.com>; Tue, 23 Dec 2008 09:09:06 -0800 (PST)
Received: from nwk-avmta-2.sfbay.sun.com (nwk-avmta-2.SFBay.Sun.COM [129.145.155.6])
	by newsunmail1brm.central.sun.com (8.13.7+Sun/8.13.7/ENSMAIL,v2.2) with ESMTP id mBNH8ttx005247
	for <@sunmail2sca.sfbay.sun.com:fwarc@sun.com>; Tue, 23 Dec 2008 10:09:06 -0700 (MST)
Received: from pmxchannel-daemon.nwk-avmta-2.sfbay.sun.com by
 nwk-avmta-2.sfbay.sun.com
 (Sun Java System Messaging Server 6.2-3.04 (built Jul 15 2005))
 id <0KCC00I1PAB4XA00@nwk-avmta-2.sfbay.sun.com> for fwarc@sun.com
 (ORCPT fwarc@sun.com); Tue, 23 Dec 2008 09:09:04 -0800 (PST)
Received: from brmea-mail-2.sun.com ([192.18.98.43])
 by nwk-avmta-2.sfbay.sun.com
 (Sun Java System Messaging Server 6.2-3.04 (built Jul 15 2005))
 with ESMTP id <0KCC00FU9AB3MW30@nwk-avmta-2.sfbay.sun.com> for fwarc@sun.com
 (ORCPT fwarc@sun.com); Tue, 23 Dec 2008 09:09:03 -0800 (PST)
Received: from fe-amer-09.sun.com ([192.18.109.79])
	by brmea-mail-2.sun.com (8.13.6+Sun/8.12.9) with ESMTP id mBNH92YE006273	for
 <fwarc@sun.com>; Tue, 23 Dec 2008 17:09:03 +0000 (GMT)
Received: from conversion-daemon.mail-amer.sun.com by mail-amer.sun.com
 (Sun Java System Messaging Server 6.2-8.04 (built Feb 28 2007))
 id <0KCC006018UV0U00@mail-amer.sun.com>
 (original mail from Stephen.Ehring@Sun.COM)
 for fwarc@sun.com (ORCPT fwarc@sun.com); Tue, 23 Dec 2008 10:09:02 -0700 (MST)
Received: from dhcp-ubur03-184-152.East.Sun.COM ([129.148.184.152])
 by mail-amer.sun.com
 (Sun Java System Messaging Server 6.2-8.04 (built Feb 28 2007))
 with ESMTPSA id <0KCC00CLCAB2TFE0@mail-amer.sun.com> for fwarc@sun.com
 (ORCPT fwarc@sun.com); Tue, 23 Dec 2008 10:09:02 -0700 (MST)
Date: Tue, 23 Dec 2008 12:09:01 -0500
From: Stephen Ehring <Stephen.Ehring@sun.com>
Subject: FWARC 2008/788 FW Progress State Domain Service
Sender: Stephen.Ehring@sun.com
To: Firmware Arch <fwarc@sun.com>
Message-id: <49511B2D.102@sun.com>
MIME-version: 1.0
Content-type: text/plain; format=flowed; charset=ISO-8859-1
Content-transfer-encoding: 7BIT
X-PMX-Version: 5.4.1.325704
User-Agent: Thunderbird 2.0.0.18 (Macintosh/20081105)
Status: RO
Content-Length: 5537

I'm sponsoring this fast-track case for Yu Kong. The case defines a new 
domain service which will allow a guest Openboot to notify vbsc of 
changes in the firmware progress state, which will in turn allow vbsc to 
implement the new IPMI 'System Firmware Progress' sensor.

The interfaces can be released in a micro/minor version of the firmware.

The case is set to time out on 1/7/2009.

Steve

http://sac.eng.sun.com/Archives/CaseLog/arc/FWARC/2008/788/onepager.txt

1. Introduction
   1.1. Project/Component Working Name:
    FW Progress State Domain Service

   1.2. Name of Document Author/Supplier:
    yu.kong@sun.com

   1.3. Date of This Document:
        December 23, 2008

   1.4. Name of Major Document Customer(s)/Consumer(s):
    1.4.1. The PAC or CPT you expect to review your project:
        HS PAC

    1.4.2. The ARC(s) you expect to review your project:
        FWARC

    1.4.3. The Director/VP who is "Sponsoring" this project:
        Jesse Lawrendra

    1.4.4. The name of your business unit:
        Systems Group
            Sparc Platform Software

   1.5. Email Aliases:
    1.5.1. Responsible Manager: chad.solomon@sun.com
    1.5.2. Responsible Engineer: yu.kong@sun.com

2. Project Summary

   2.1. Project Description:

    This case defines a new domain service to pass various
    host states to vbsc while the host is coming up.

3. Business Summary
   3.1. Problem Area

        IPMI v1.5 specification defines a new sensor called
        'System Firmware Progress'. The purpose of this sensor 
        is to model the firmware running on the payload and provide 
        various states to the external management software(e.g ShMM) 
        using standard IPMI event mechanism. The firmware states 
        of interest includes 'Progress', 'Hang' and 'Error' with 
        various sub-states as defined in the specification.

        In order for the host to communicate this information to
        vbsc, a new domain service is reqired, which this case
        attempts to define.

4. Technical Description:

    4.1 Overview

    OpenBoot is required to send progress indicator states to vBSC. VBSC 
needs
    these states for Firmware Progress Sensor implementation.
 
    4.2 Firmware Progress State domain service

    FW Progress State domain will pass progress state from Openboot to vBSC.
   
   
    4.2.1 Service ID
    The service ID for Firmware Progress State domain service is:

         Service ID                     Description
         ----------                     -----------
         "fw-progress-state"            Primary FW progress state service
         "fw-progress-state-backup"     Secondary FW Progress state service


    4.2.2 Message Header

         Offset Size Field name Description
         ------ ---- ---------- -----------
           0     4      cmd      Command

    4.2.3 Message types

         The following constants are defined for the Firmware Progress state
         domain service command identifier values:

                Type                    Value      Definition
          --------------------------    -----  
------------------------        
          FWPS_DS_STATE_UPDATE           0x0   FW Progress state update

                                               
        
    4.3    FW Progress State update Message
  
    4.3.1  FW Progress State Update Payload

         The message header is followed by the following payload:

         Offset Size Field name           Description
         ------ ---- ---------- ------------------------------
          0      4    state               Firmware Progress states


    4.3.1.1  Firmware Progress State definitions
   
   
         Progress State          Value
         ------------------------------------------------   
         Pre OS boot               1
         Boot start                2
   
   
   
        Pre OS boot state indicates that OpenBoot is done with 
initialization
        and is ready to do Operating system boot.


     Boot Start state indicates that Operating System booting has started.
     
     
     Note : For Firmware progression sensor design, Pre OS boot state will
            be used to signify that OpenBoot has sucessfully finished
            initialization process and is ready to boot or drop to OK 
prompt.
            This will further indicate that there have been no hang during
            OpenBoot initialization.
           
           
   

    4.4 Imported Interfaces :
               
         Interface              Classification          Comments
         
====================================================================

         Domain Services         Sun Private        Defined by 
FWARC/2006/055
         Specification


    4.5 Exported Interfaces:


         Interface               Classification         Comments
         
====================================================================

 
        "fw-progress-state" and
        "fw-progress-state-backup" Domain Services:

         Message Types:
            FWPS_DS_STATE_UPDATE   Sun Private      FW Progress state update
           
           
         FW Progress State definitions:
        
         Pre OS boot               Sun Private      OpenBoot 
initialization done
         Boot start                Sun Private      Boot has started

5. Reference Documents

   [1] FWARC 2006/055 Domain Services

   [2] FWARC 2006/473 sun4v guest state API update

   [3] System Firmware Progress Sensor for CP3260 Specificiation

       fps3260v1.2-diff.pdf



From sacadmin Wed Jan  7 11:58:14 2009
Received: from sunmail2sca.sfbay.sun.com (sunmail2sca.SFBay.Sun.COM [129.145.155.234])
	by sac.sfbay.sun.com (8.13.8+Sun/8.13.8) with ESMTP id n07JwEJF019340
	for <fwarc@sac.sfbay.sun.com>; Wed, 7 Jan 2009 11:58:14 -0800 (PST)
Received: from brm-avmta-1.central.sun.com (brm-avmta-1.Central.Sun.COM [129.147.4.11])
	by sunmail2sca.sfbay.sun.com (8.13.7+Sun/8.13.7/ENSMAIL,v2.2) with ESMTP id n07JwDTx008239
	for <@sunmail2sca.sfbay.sun.com:fwarc@sun.com>; Wed, 7 Jan 2009 11:58:14 -0800 (PST)
Received: from pmxchannel-daemon.brm-avmta-1.central.sun.com by
 brm-avmta-1.central.sun.com
 (Sun Java System Messaging Server 6.2-3.04 (built Jul 15 2005))
 id <0KD400L1HA514P00@brm-avmta-1.central.sun.com> for fwarc@sun.com
 (ORCPT fwarc@sun.com); Wed, 07 Jan 2009 12:58:13 -0700 (MST)
Received: from brmea-mail-4.sun.com ([192.18.98.36])
 by brm-avmta-1.central.sun.com
 (Sun Java System Messaging Server 6.2-3.04 (built Jul 15 2005))
 with ESMTP id <0KD400HIUA4ZI2D0@brm-avmta-1.central.sun.com> for fwarc@sun.com
 (ORCPT fwarc@sun.com); Wed, 07 Jan 2009 12:58:11 -0700 (MST)
Received: from fe-amer-10.sun.com ([192.18.109.80])
	by brmea-mail-4.sun.com (8.13.6+Sun/8.12.9) with ESMTP id n07JwAm3002218	for
 <fwarc@sun.com>; Wed, 07 Jan 2009 19:58:11 +0000 (GMT)
Received: from conversion-daemon.mail-amer.sun.com by mail-amer.sun.com
 (Sun Java System Messaging Server 6.2-8.04 (built Feb 28 2007))
 id <0KD4002017W34O00@mail-amer.sun.com>
 (original mail from Stephen.Ehring@Sun.COM)
 for fwarc@sun.com (ORCPT fwarc@sun.com); Wed, 07 Jan 2009 12:58:10 -0700 (MST)
Received: from dhcp-ubur03-184-152.East.Sun.COM ([129.148.184.152])
 by mail-amer.sun.com
 (Sun Java System Messaging Server 6.2-8.04 (built Feb 28 2007))
 with ESMTPSA id <0KD4002D4A4KBOG0@mail-amer.sun.com> for fwarc@sun.com
 (ORCPT fwarc@sun.com); Wed, 07 Jan 2009 12:57:57 -0700 (MST)
Date: Wed, 07 Jan 2009 14:57:55 -0500
From: Stephen Ehring <Stephen.Ehring@sun.com>
Subject: Re: FWARC 2008/788 FW Progress State Domain Service
In-reply-to: <49511B2D.102@sun.com>
Sender: Stephen.Ehring@sun.com
To: Firmware Arch <fwarc@sun.com>
Message-id: <49650943.5050404@sun.com>
MIME-version: 1.0
Content-type: text/plain; format=flowed; charset=ISO-8859-1
Content-transfer-encoding: 7BIT
X-PMX-Version: 5.4.1.325704
References: <49511B2D.102@sun.com>
User-Agent: Thunderbird 2.0.0.19 (Macintosh/20081209)
Status: RO
Content-Length: 409

The timer on this case has expired, so it is closed as approved. At the 
request of the project team, the redundant "backup" domain service was 
removed, but since that is a small and non-controversial change, I'm not 
extending the timer. If anyone thinks this is a problem, let me know and 
I'll extend the timer on the case.

The interfaces can be released in a micro/minor version of the firmware.

Steve

